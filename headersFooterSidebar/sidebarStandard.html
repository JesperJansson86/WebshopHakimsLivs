<!DOCTYPE html>
<html lang="sv">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous" />
  <title>Startsida</title>
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf"
    crossorigin="anonymous"></script>
</head>

<body>
  <div class="p-3" style="background-color: rgb(78, 131, 78)">
    <!-- "hamburgare meny" -->
    <div class="d-md-none">
      <div class="collapse" id="togglerForSmallScreens">
        <div class="p-4">
          <ul class="list-unstyled" id="contentOnSmallScreen"></ul>
        </div>
      </div>
      <nav class="navbar navbar-dark">
        <div class="container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
            data-bs-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent"
            aria-expanded="false" aria-label="Toggle navigation" onclick="hideShowMenu()">
            <span class="navbar-toggler-icon"></span>
          </button>
        </div>
      </nav>
    </div>
    <!-- ."hamburgare meny" -->

    <!-- sidomenyn när den inte är på en liten skräm -->
    <div id="menuOnAllOtherScreens" class="d-none d-md-block">
      <ul class="list-unstyled" id="thisiscontent">
        <li>
          <!-- Kategorilista hämtas från json -->
          <div id="viewCategories"></div>
        </li>
      </ul>
    </div>


    <script>
      /**
       * Lägger till knappar för kategorierna som finns i json fil.
       * */
      let output = `
                <button
                class="btn btn-toggle btn-outline-light mb-2"
            style="width: 100%"
            id="btnAllProducts"
                  onclick="location.href='../testOfProductView.html'; highlightButton(this.id);"
                >
                  Alla produkter
                </button>
              `;
      $.getJSON("../json/categories.json", function (data) {
        $.each(data, function (key, value) {
          output += `
                <button
                class="btn btn-toggle btn-outline-light mb-2"
                style="width: 100%"
                id="btn${value.category}"
                  onclick="localStorage.setItem('Knapp', JSON.stringify(${value.id})); highlightButton(this.id); location.href='../testOfProductView.html';"
                >
                ${value.category}
                </button>
              `;
        });
        document.getElementById("viewCategories").innerHTML = output;

        /**
         * Om man klickar på en knapp som finns i sidomenyn ska denna byta bakgrundsfärg för att markera att det är den sidan man är på
         * */
        let enKnapp = JSON.parse(localStorage.getItem("Knappen"));
        if (enKnapp != null) {
          document.getElementById(enKnapp).style.backgroundColor = "#ADC178";
          localStorage.removeItem("Knappen");
        }
      });

      /*
    Om man klickar på "hamburgaren" när man är på en liten skräm så ska menyn stängas eller öppnas beroende på stadiet den är i
    */
      function hideShowMenu() {
        var myPages = document.getElementById("togglerForSmallScreens");
        // När sidomenyn är liten flyttas sidomenyns content upp i hamburgaren
        document.getElementById(
          "contentOnSmallScreen"
        ).innerHTML = document.getElementById("thisiscontent").innerHTML;

        if (myPages.style.display === "block") {
          myPages.style.display = "none";
        } else {
          myPages.style.display = "block";
        }
      }

      /**
       * När man klickar på en knapp så sparas dennes id till LS
       * */
      function highlightButton(clicked_btn) {
        localStorage.setItem("Knappen", JSON.stringify(clicked_btn));
      }
    </script>
</body>

</html>